{"version":3,"sources":["app.js","routes.js","_layout/header/header-controller.js","_layout/head/head-service.js","_layout/head/head-controller.js","home/home-controller.js","scripts.js","_layout/header/header.js","_layout/footer/footer.js","home/home.js","constants.js"],"names":["statesConfiguration","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","ENV","state","url","requireAuth","views","container","templateUrl","controller","controllerAs","abstract","header","footer","container@","otherwise","html5Mode","hashPrefix","interceptors","push","http401Interceptor","$q","$location","responseError","rejection","status","path","reject","checkAuth","$rootScope","$state","$on","event","toState","isLoggedIn","preventDefault","go","name","HeaderCtrl","activate","Head","resetMetadata","service","metadata","pageTitle","tags","statusCode","redirect","updatePage","page","title","description","updateNotFound","updateMoved","HeadCtrl","vm","this","HomeCtrl","angular","module","config","RollbarProvider","init","accessToken","captureUncaught","payload","environment","client","javascript","source_map_enabled","code_version","version","guess_uncaught_frames","$analyticsProvider","virtualPageviews","run","$analytics","pageTrack","$inject","e","$templateCache","put","constant","apiEndpoint"],"mappings":"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","file":"scripts-3f6ef71208.js","sourcesContent":["'use strict';\n\nangular\n  .module('sampleApp', [\n    'sampleApp.config',\n    'sampleApp.templates',\n\n    'ui.router',\n    'angulartics',\n    'tandibar/ng-rollbar',\n    'angulartics.google.analytics'\n  ])\n\n  // Track Errors (Rollbar)\n  .config(function(RollbarProvider, ENV) {\n    // report errors on deployed systems\n    if (ENV.name !== 'development') {\n      RollbarProvider.init({\n        accessToken: 'XXX',\n        captureUncaught: true,\n        payload: {\n          environment: ENV.name,\n          client: {\n            javascript: {\n              source_map_enabled: true,\n              code_version: ENV.version,\n              guess_uncaught_frames: true\n            }\n          }\n        }\n      });\n    }\n  })\n\n  // Track pages (Google Analytics)\n  .config(function($analyticsProvider) {\n    // turn off automatic tracking\n    $analyticsProvider.virtualPageviews(false);\n  })\n  .run(function($rootScope, $location, $analytics) {\n    $rootScope.$on('$stateChangeSuccess', function() {\n      $analytics.pageTrack($location.path());\n    });\n  });\n","'use strict';\n\nangular\n  .module('sampleApp')\n  .config(statesConfiguration)\n  .run(checkAuth);\n\n/* @ngInject */\nfunction statesConfiguration($stateProvider, $urlRouterProvider, $locationProvider, $httpProvider, ENV) {\n\n  $stateProvider\n\n    // landing (login/register)\n    .state('landing', {\n      url: '/landing',\n      requireAuth: false,\n      views: {\n        container: {\n          templateUrl: 'components/landing/landing.html',\n          controller: 'LandingCtrl',\n          controllerAs: 'landingCtrl'\n        }\n      }\n    })\n\n\n    ////////////\n    // IN APP //\n    ////////////\n    .state('app', {\n      abstract: true,\n      views: {\n        header: {\n          templateUrl: 'components/_layout/header/header.html',\n          controller: 'HeaderCtrl',\n          controllerAs: 'headerCtrl'\n        },\n        footer: {\n          templateUrl: 'components/_layout/footer/footer.html'\n        }\n      }\n    })\n\n    // home\n    .state('app.home', {\n      url: '/',\n      requireAuth: true,\n      views: {\n        'container@': {\n          templateUrl: 'components/home/home.html',\n          controller: 'HomeCtrl',\n          controllerAs: 'homeCtrl'\n        }\n      }\n    });\n\n  /* @ngInject */\n  $urlRouterProvider.otherwise(function() {\n    // UserService & $state not available during .config(), inject them (manually) later\n\n    // requesting unknown page unequal to '/'\n    // var path = $location.path();\n    // if (path !== '/') {\n    //   $injector.get('$state').go('404');\n    //   return path; // this trick allows to show the error page on unknown address\n    // }\n\n    // go to '/' and check logged in status there\n    return '/';\n  });\n\n  $locationProvider\n    .html5Mode(ENV.html5Mode)\n    .hashPrefix('!');\n\n  $httpProvider.interceptors.push(http401Interceptor);\n}\n\n// go to index.login when response 401 arrives\n/* @ngInject */\nfunction http401Interceptor($q, $location) {\n  return {\n    responseError: function(rejection) {\n      /* istanbul ignore else */\n      if (rejection.status === 401) {\n        if ($location.path() !== '/index') {\n          $location.path('/index'); //.search('returnTo', $location.path());\n        }\n      }\n      return $q.reject(rejection);\n    }\n  };\n}\n\n// go to landing if not logged in\n/* @ngInject */\nfunction checkAuth($rootScope, $state) {\n  $rootScope.$on('$stateChangeStart',\n    function(event, toState) {\n\n      // auth required for next page? if so, check auth\n      if (toState.requireAuth && !isLoggedIn()) {\n        event.preventDefault();\n\n        $state.go('landing');\n\n        // avoid access to landing if logged in\n      } else if (toState.name === 'landing' && isLoggedIn()) {\n        event.preventDefault();\n        $state.go('app.home');\n      }\n    });\n}\n\nfunction isLoggedIn() {\n  return true;\n}\n\n\n","'use strict';\n\nangular\n  .module('sampleApp')\n  .controller('HeaderCtrl', HeaderCtrl);\n\nfunction HeaderCtrl() {\n  //var vm = this;\n\n  activate();\n\n  ////////////\n\n  function activate() {}\n\n}\n","'use strict';\n\nangular\n  .module('sampleApp')\n  .service('Head', Head);\n\nfunction Head() {\n\n  var service = {\n    metadata: {},\n    updatePage: updatePage,\n    updateNotFound: updateNotFound,\n    updateMoved: updateMoved\n  };\n  return service;\n\n  ////////////////\n\n  function resetMetadata() {\n    // tags\n    service.metadata.pageTitle =  'stomt.com';\n    //metadata.canonicalUrl =  'https://www.stomt.com';\n    service.metadata.tags =  {};\n\n    // prerender\n    service.metadata.statusCode =  200;\n    service.metadata.redirect =  null;\n  }\n\n  function updatePage(page) {\n    resetMetadata();\n\n    // tags\n    service.metadata.pageTitle = page.title;\n    service.metadata.tags = {\n      description: page.description\n    };\n  }\n\n  function updateNotFound() {\n    resetMetadata();\n\n    // tags\n    service.metadata.pageTitle = 'Page does not exist';\n    service.metadata.tags = {\n      description: 'Not Found - 404'\n    };\n\n    // prerender\n    service.metadata.statusCode = 404;\n  }\n\n  function updateMoved(redirect) {\n    resetMetadata();\n\n    // tags\n    service.metadata.pageTitle = 'The page has been moved';\n    service.metadata.tags = {\n      description: 'Moved - 301'\n    };\n\n    // prerender\n    service.metadata.statusCode = 301;\n    service.metadata.redirect = redirect;\n  }\n}\n","'use strict';\n\nangular\n  .module('sampleApp')\n  .controller('HeadCtrl', HeadCtrl);\n\nfunction HeadCtrl(Head) {\n  var vm = this;\n\n  vm.metadata = Head.metadata;\n\n  activate();\n\n  ////////////\n\n  function activate() {}\n\n}\n","'use strict';\n\nangular\n  .module('sampleApp')\n  .controller('HomeCtrl', HomeCtrl);\n\nfunction HomeCtrl(Head) {\n  var vm = this;\n\n  vm.name = 'Peter';\n\n  activate();\n\n  ////////////\n\n  function activate() {\n    Head.updatePage({\n      title: 'Homepage',\n      description: 'Entry point into app'\n    });\n  }\n\n}\n",null,"(function(module) {\ntry {\n  module = angular.module('sampleApp.templates');\n} catch (e) {\n  module = angular.module('sampleApp.templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/_layout/header/header.html',\n    '<a href=\"/\">Home</a>');\n}]);\n})();\n","(function(module) {\ntry {\n  module = angular.module('sampleApp.templates');\n} catch (e) {\n  module = angular.module('sampleApp.templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/_layout/footer/footer.html',\n    '<footer>2015 - angular sample app</footer>');\n}]);\n})();\n","(function(module) {\ntry {\n  module = angular.module('sampleApp.templates');\n} catch (e) {\n  module = angular.module('sampleApp.templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/home/home.html',\n    '<h1 class=\"flaticon-orientation51\">Welcome {{homeCtrl.name}}</h1>');\n}]);\n})();\n","angular.module(\"sampleApp.config\", [])\n\n.constant(\"ENV\", {\n\t\"name\": \"production\",\n\t\"version\": \"0.0.0\",\n\t\"html5Mode\": false,\n\t\"apiEndpoint\": \"https://rest.domain.com\"\n})\n\n;"],"sourceRoot":"/source/"}